CREATE DATABASE IF NOT EXISTS simtec_control;
USE simtec_control;

CREATE TABLE IF NOT EXISTS usuarios (
    id INT AUTO_INCREMENT PRIMARY KEY,
    usuario VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL
);
CREATE TABLE IF NOT EXISTS asistencias (
    id INT AUTO_INCREMENT PRIMARY KEY,
    usuario_id INT NOT NULL,
    fecha DATE NOT NULL,
    hora_entrada TIME DEFAULT NULL,
    hora_salida TIME DEFAULT NULL,
    total_horas DECIMAL(5,2) DEFAULT 0.00,
    estado ENUM('activo', 'finalizado', 'descanso') DEFAULT 'activo',
    FOREIGN KEY (usuario_id) REFERENCES usuarios(id),
    UNIQUE KEY unica_jornada_dia (usuario_id, fecha) 
);

ALTER TABLE usuarios 
ADD COLUMN rol ENUM('admin', 'empleado') DEFAULT 'empleado' AFTER nombre;